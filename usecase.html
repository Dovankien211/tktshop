<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S∆° ƒë·ªì Use Case - TKT Shop</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .diagram-container {
            position: relative;
            width: 100%;
            height: 900px;
            background: white;
            overflow: hidden;
        }
        
        /* System Boundary */
        .system-boundary {
            position: absolute;
            top: 50px;
            left: 150px;
            right: 150px;
            bottom: 50px;
            border: 3px dashed #6c757d;
            border-radius: 15px;
            background: linear-gradient(135deg, rgba(248,249,250,0.8) 0%, rgba(233,236,239,0.3) 100%);
        }
        
        .system-title {
            position: absolute;
            top: -20px;
            left: 30px;
            background: white;
            padding: 8px 20px;
            font-weight: bold;
            font-size: 18px;
            color: #495057;
            border: 3px solid #6c757d;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* Actors */
        .actor {
            position: absolute;
            width: 100px;
            height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #2c3e50;
            font-weight: bold;
            font-size: 13px;
            text-align: center;
        }
        
        .actor-stick {
            position: relative;
            width: 50px;
            height: 80px;
            margin-bottom: 8px;
        }
        
        .actor-head {
            width: 20px;
            height: 20px;
            border: 3px solid #495057;
            border-radius: 50%;
            background: white;
            margin: 0 auto 5px;
        }
        
        .actor-body {
            width: 2px;
            height: 30px;
            background: #495057;
            margin: 0 auto;
            position: relative;
        }
        
        .actor-arms {
            position: absolute;
            top: 8px;
            left: -12px;
            width: 26px;
            height: 2px;
            background: #495057;
        }
        
        .actor-legs {
            position: absolute;
            bottom: -15px;
            left: -10px;
            width: 0;
            height: 0;
        }
        
        .actor-legs::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            width: 2px;
            height: 15px;
            background: #495057;
            transform: rotate(-20deg);
            transform-origin: top;
        }
        
        .actor-legs::after {
            content: '';
            position: absolute;
            left: 12px;
            top: 0;
            width: 2px;
            height: 15px;
            background: #495057;
            transform: rotate(20deg);
            transform-origin: top;
        }
        
        /* Use Cases */
        .use-case {
            position: absolute;
            background: white;
            border: 2px solid #27ae60;
            border-radius: 50px;
            padding: 10px 15px;
            font-size: 12px;
            font-weight: 600;
            color: #2c3e50;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .use-case:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* Different colors for different actors */
        .customer-uc { 
            border-color: #e74c3c; 
            background: linear-gradient(135deg, #fdf2f2 0%, #fce4ec 100%);
            color: #c62828;
        }
        
        .admin-uc { 
            border-color: #9b59b6; 
            background: linear-gradient(135deg, #f8f4fd 0%, #f3e5f5 100%);
            color: #7b1fa2;
        }
        
        .shipper-uc { 
            border-color: #f39c12; 
            background: linear-gradient(135deg, #fef9e7 0%, #fff8e1 100%);
            color: #ef6c00;
        }
        
        .system-uc { 
            border-color: #34495e; 
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #495057;
        }
        
        /* Actor positions */
        .customer { top: 80px; left: 30px; }
        .admin { top: 250px; left: 30px; }
        .staff { top: 420px; left: 30px; }
        .shipper { top: 590px; left: 30px; }
        .vnpay { top: 750px; left: 30px; }
        
        /* Use case positions - Customer area */
        .uc-register { top: 80px; left: 200px; }
        .uc-browse { top: 80px; left: 350px; }
        .uc-cart { top: 80px; left: 500px; }
        .uc-order { top: 130px; left: 200px; }
        .uc-payment { top: 130px; left: 350px; }
        .uc-track { top: 130px; left: 500px; }
        .uc-review { top: 180px; left: 200px; }
        .uc-profile { top: 180px; left: 350px; }
        
        /* Admin area */
        .uc-manage-products { top: 250px; left: 200px; }
        .uc-manage-orders { top: 250px; left: 370px; }
        .uc-manage-users { top: 250px; left: 540px; }
        .uc-manage-categories { top: 300px; left: 200px; }
        .uc-manage-shippers { top: 300px; left: 370px; }
        .uc-reports { top: 300px; left: 540px; }
        .uc-inventory { top: 350px; left: 200px; }
        .uc-analytics { top: 350px; left: 370px; }
        
        /* Staff area */
        .uc-process-orders { top: 420px; left: 200px; }
        .uc-update-status { top: 420px; left: 370px; }
        .uc-support { top: 470px; left: 200px; }
        .uc-verify-payment { top: 470px; left: 370px; }
        
        /* Shipper area */
        .uc-view-schedule { top: 590px; left: 200px; }
        .uc-delivery { top: 590px; left: 370px; }
        .uc-confirm-delivery { top: 640px; left: 200px; }
        .uc-cod-report { top: 640px; left: 370px; }
        .uc-gps-update { top: 690px; left: 200px; }
        
        /* VNPay area */
        .uc-vnpay-process { top: 750px; left: 200px; }
        .uc-vnpay-callback { top: 750px; left: 370px; }
        
        /* External actors on the right */
        .notification-system { top: 200px; right: 30px; }
        .email-system { top: 350px; right: 30px; }
        .sms-system { top: 500px; right: 30px; }
        
        /* External use cases */
        .uc-send-notification { top: 200px; right: 200px; }
        .uc-send-email { top: 350px; right: 200px; }
        .uc-send-sms { top: 500px; right: 200px; }
        
        /* Legend */
        .legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            font-size: 12px;
            border: 1px solid #dee2e6;
        }
        
        .legend-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #495057;
            font-size: 14px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 10px;
            margin-right: 10px;
            border: 2px solid;
        }
        
        /* Include/Extend labels */
        .include-label {
            position: absolute;
            background: white;
            padding: 2px 6px;
            font-size: 10px;
            color: #6c757d;
            border: 1px solid #dee2e6;
            border-radius: 3px;
        }
        
        /* Download button */
        .download-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            z-index: 1000;
        }
        
        .download-btn:hover {
            background: #0056b3;
        }
        
        /* Print styles */
        @media print {
            body { margin: 0; }
            .download-btn { display: none; }
            .container { box-shadow: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè™ S∆° ƒë·ªì Use Case - H·ªá th·ªëng TKT Shop</h1>
            <p>S∆° ƒë·ªì chi ti·∫øt c√°c ch·ª©c nƒÉng v√† ng∆∞·ªùi d√πng trong h·ªá th·ªëng b√°n gi√†y online</p>
        </div>
        
        <button class="download-btn" onclick="downloadDiagram()">üì• T·∫£i xu·ªëng PNG</button>
        
        <div class="diagram-container" id="diagram">
            <!-- System Boundary -->
            <div class="system-boundary">
                <div class="system-title">TKT Shop System</div>
            </div>
            
            <!-- Left Side Actors -->
            <div class="actor customer">
                <div class="actor-stick">
                    <div class="actor-head"></div>
                    <div class="actor-body">
                        <div class="actor-arms"></div>
                        <div class="actor-legs"></div>
                    </div>
                </div>
                <div>Kh√°ch h√†ng</div>
            </div>
            
            <div class="actor admin">
                <div class="actor-stick">
                    <div class="actor-head"></div>
                    <div class="actor-body">
                        <div class="actor-arms"></div>
                        <div class="actor-legs"></div>
                    </div>
                </div>
                <div>Admin</div>
            </div>
            
            <div class="actor staff">
                <div class="actor-stick">
                    <div class="actor-head"></div>
                    <div class="actor-body">
                        <div class="actor-arms"></div>
                        <div class="actor-legs"></div>
                    </div>
                </div>
                <div>Nh√¢n vi√™n</div>
            </div>
            
            <div class="actor shipper">
                <div class="actor-stick">
                    <div class="actor-head"></div>
                    <div class="actor-body">
                        <div class="actor-arms"></div>
                        <div class="actor-legs"></div>
                    </div>
                </div>
                <div>Shipper</div>
            </div>
            
            <div class="actor vnpay">
                <div class="actor-stick">
                    <div class="actor-head"></div>
                    <div class="actor-body">
                        <div class="actor-arms"></div>
                        <div class="actor-legs"></div>
                    </div>
                </div>
                <div>VNPay</div>
            </div>
            
            <!-- Right Side External Systems -->
            <div class="actor notification-system">
                <div class="actor-stick">
                    <div class="actor-head"></div>
                    <div class="actor-body">
                        <div class="actor-arms"></div>
                        <div class="actor-legs"></div>
                    </div>
                </div>
                <div>H·ªá th·ªëng th√¥ng b√°o</div>
            </div>
            
            <div class="actor email-system">
                <div class="actor-stick">
                    <div class="actor-head"></div>
                    <div class="actor-body">
                        <div class="actor-arms"></div>
                        <div class="actor-legs"></div>
                    </div>
                </div>
                <div>Email System</div>
            </div>
            
            <div class="actor sms-system">
                <div class="actor-stick">
                    <div class="actor-head"></div>
                    <div class="actor-body">
                        <div class="actor-arms"></div>
                        <div class="actor-legs"></div>
                    </div>
                </div>
                <div>SMS Gateway</div>
            </div>
            
            <!-- Customer Use Cases -->
            <div class="use-case customer-uc uc-register">ƒêƒÉng k√Ω/<br>ƒêƒÉng nh·∫≠p</div>
            <div class="use-case customer-uc uc-browse">Duy·ªát<br>s·∫£n ph·∫©m</div>
            <div class="use-case customer-uc uc-cart">Qu·∫£n l√Ω<br>gi·ªè h√†ng</div>
            <div class="use-case customer-uc uc-order">ƒê·∫∑t h√†ng</div>
            <div class="use-case customer-uc uc-payment">Thanh to√°n</div>
            <div class="use-case customer-uc uc-track">Theo d√µi<br>ƒë∆°n h√†ng</div>
            <div class="use-case customer-uc uc-review">ƒê√°nh gi√°<br>s·∫£n ph·∫©m</div>
            <div class="use-case customer-uc uc-profile">Qu·∫£n l√Ω<br>h·ªì s∆°</div>
            
            <!-- Admin Use Cases -->
            <div class="use-case admin-uc uc-manage-products">Qu·∫£n l√Ω<br>s·∫£n ph·∫©m</div>
            <div class="use-case admin-uc uc-manage-orders">Qu·∫£n l√Ω<br>ƒë∆°n h√†ng</div>
            <div class="use-case admin-uc uc-manage-users">Qu·∫£n l√Ω<br>ng∆∞·ªùi d√πng</div>
            <div class="use-case admin-uc uc-manage-categories">Qu·∫£n l√Ω<br>danh m·ª•c</div>
            <div class="use-case admin-uc uc-manage-shippers">Qu·∫£n l√Ω<br>shipper</div>
            <div class="use-case admin-uc uc-reports">B√°o c√°o<br>th·ªëng k√™</div>
            <div class="use-case admin-uc uc-inventory">Qu·∫£n l√Ω<br>kho h√†ng</div>
            <div class="use-case admin-uc uc-analytics">Ph√¢n t√≠ch<br>d·ªØ li·ªáu</div>
            
            <!-- Staff Use Cases -->
            <div class="use-case admin-uc uc-process-orders">X·ª≠ l√Ω<br>ƒë∆°n h√†ng</div>
            <div class="use-case admin-uc uc-update-status">C·∫≠p nh·∫≠t<br>tr·∫°ng th√°i</div>
            <div class="use-case admin-uc uc-support">H·ªó tr·ª£<br>kh√°ch h√†ng</div>
            <div class="use-case admin-uc uc-verify-payment">X√°c minh<br>thanh to√°n</div>
            
            <!-- Shipper Use Cases -->
            <div class="use-case shipper-uc uc-view-schedule">Xem l·ªãch<br>tr√¨nh</div>
            <div class="use-case shipper-uc uc-delivery">Th·ª±c hi·ªán<br>giao h√†ng</div>
            <div class="use-case shipper-uc uc-confirm-delivery">X√°c nh·∫≠n<br>giao h√†ng</div>
            <div class="use-case shipper-uc uc-cod-report">B√°o c√°o<br>COD</div>
            <div class="use-case shipper-uc uc-gps-update">C·∫≠p nh·∫≠t<br>v·ªã tr√≠ GPS</div>
            
            <!-- VNPay Use Cases -->
            <div class="use-case system-uc uc-vnpay-process">X·ª≠ l√Ω giao d·ªãch<br>VNPay</div>
            <div class="use-case system-uc uc-vnpay-callback">Callback<br>thanh to√°n</div>
            
            <!-- External System Use Cases -->
            <div class="use-case system-uc uc-send-notification">G·ª≠i th√¥ng b√°o<br>push</div>
            <div class="use-case system-uc uc-send-email">G·ª≠i email<br>x√°c nh·∫≠n</div>
            <div class="use-case system-uc uc-send-sms">G·ª≠i SMS<br>OTP</div>
            
            <!-- Connection Lines -->
            <svg style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;">
                <!-- Customer connections -->
                <line x1="130" y1="100" x2="200" y2="95" stroke="#e74c3c" stroke-width="2"/>
                <line x1="130" y1="105" x2="350" y2="95" stroke="#e74c3c" stroke-width="2"/>
                <line x1="130" y1="110" x2="500" y2="95" stroke="#e74c3c" stroke-width="2"/>
                <line x1="130" y1="115" x2="200" y2="145" stroke="#e74c3c" stroke-width="2"/>
                <line x1="130" y1="120" x2="350" y2="145" stroke="#e74c3c" stroke-width="2"/>
                <line x1="130" y1="125" x2="500" y2="145" stroke="#e74c3c" stroke-width="2"/>
                <line x1="130" y1="130" x2="200" y2="195" stroke="#e74c3c" stroke-width="2"/>
                <line x1="130" y1="135" x2="350" y2="195" stroke="#e74c3c" stroke-width="2"/>
                
                <!-- Admin connections -->
                <line x1="130" y1="270" x2="200" y2="265" stroke="#9b59b6" stroke-width="2"/>
                <line x1="130" y1="275" x2="370" y2="265" stroke="#9b59b6" stroke-width="2"/>
                <line x1="130" y1="280" x2="540" y2="265" stroke="#9b59b6" stroke-width="2"/>
                <line x1="130" y1="285" x2="200" y2="315" stroke="#9b59b6" stroke-width="2"/>
                <line x1="130" y1="290" x2="370" y2="315" stroke="#9b59b6" stroke-width="2"/>
                <line x1="130" y1="295" x2="540" y2="315" stroke="#9b59b6" stroke-width="2"/>
                <line x1="130" y1="300" x2="200" y2="365" stroke="#9b59b6" stroke-width="2"/>
                <line x1="130" y1="305" x2="370" y2="365" stroke="#9b59b6" stroke-width="2"/>
                
                <!-- Staff connections -->
                <line x1="130" y1="440" x2="200" y2="435" stroke="#9b59b6" stroke-width="2"/>
                <line x1="130" y1="445" x2="370" y2="435" stroke="#9b59b6" stroke-width="2"/>
                <line x1="130" y1="450" x2="200" y2="485" stroke="#9b59b6" stroke-width="2"/>
                <line x1="130" y1="455" x2="370" y2="485" stroke="#9b59b6" stroke-width="2"/>
                
                <!-- Shipper connections -->
                <line x1="130" y1="610" x2="200" y2="605" stroke="#f39c12" stroke-width="2"/>
                <line x1="130" y1="615" x2="370" y2="605" stroke="#f39c12" stroke-width="2"/>
                <line x1="130" y1="620" x2="200" y2="655" stroke="#f39c12" stroke-width="2"/>
                <line x1="130" y1="625" x2="370" y2="655" stroke="#f39c12" stroke-width="2"/>
                <line x1="130" y1="630" x2="200" y2="705" stroke="#f39c12" stroke-width="2"/>
                
                <!-- VNPay connections -->
                <line x1="130" y1="770" x2="200" y2="765" stroke="#34495e" stroke-width="2"/>
                <line x1="130" y1="775" x2="370" y2="765" stroke="#34495e" stroke-width="2"/>
                
                <!-- External system connections -->
                <line x1="1370" y1="220" x2="1320" y2="215" stroke="#34495e" stroke-width="2"/>
                <line x1="1370" y1="370" x2="1320" y2="365" stroke="#34495e" stroke-width="2"/>
                <line x1="1370" y1="520" x2="1320" y2="515" stroke="#34495e" stroke-width="2"/>
                
                <!-- Include relationships (dashed lines) -->
                <line x1="320" y1="145" x2="320" y2="95" stroke="#2c3e50" stroke-width="2" stroke-dasharray="5,5"/>
                <line x1="470" y1="145" x2="470" y2="195" stroke="#2c3e50" stroke-width="2" stroke-dasharray="5,5"/>
                
                <!-- Extend relationships -->
                <line x1="520" y1="145" x2="520" y2="195" stroke="#2c3e50" stroke-width="2" stroke-dasharray="8,3"/>
            </svg>
            
            <!-- Include/Extend Labels -->
            <div class="include-label" style="top: 115px; left: 305px;">&lt;&lt;include&gt;&gt;</div>
            <div class="include-label" style="top: 165px; left: 455px;">&lt;&lt;extend&gt;&gt;</div>
            <div class="include-label" style="top: 165px; left: 505px;">&lt;&lt;extend&gt;&gt;</div>
            
            <!-- Legend -->
            <div class="legend">
                <div class="legend-title">üè∑Ô∏è Ch√∫ th√≠ch m√†u s·∫Øc</div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #fdf2f2 0%, #fce4ec 100%); border-color: #e74c3c;"></div>
                    <span>Kh√°ch h√†ng</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #f8f4fd 0%, #f3e5f5 100%); border-color: #9b59b6;"></div>
                    <span>Admin/Nh√¢n vi√™n</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #fef9e7 0%, #fff8e1 100%); border-color: #f39c12;"></div>
                    <span>Shipper</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-color: #34495e;"></div>
                    <span>H·ªá th·ªëng</span>
                </div>
                <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #dee2e6;">
                    <div style="font-size: 11px; color: #6c757d;">
                        <div>‚îÅ‚îÅ‚îÅ Association</div>
                        <div>‚îÖ‚îÖ‚îÖ Include</div>
                        <div>‚îÑ‚îÑ‚îÑ Extend</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function downloadDiagram() {
            // Create canvas
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // Set high resolution
            const scale = 2;
            canvas.width = 1600 * scale;
            canvas.height = 900 * scale;
            ctx.scale(scale, scale);
            
            // White background
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, 1600, 900);
            
            // Convert HTML to canvas using html2canvas library
            // For now, we'll provide a simple download instruction
            alert('ƒê·ªÉ t·∫£i xu·ªëng:\n1. Chu·ªôt ph·∫£i v√†o s∆° ƒë·ªì\n2. Ch·ªçn "L∆∞u ·∫£nh d∆∞·ªõi d·∫°ng..."\n3. Ch·ªçn ƒë·ªãnh d·∫°ng PNG\n\nHo·∫∑c s·ª≠ d·ª•ng Ctrl+P ƒë·ªÉ in ra PDF');
        }
        
        // Add click events to use cases for detailed information
        document.querySelectorAll('.use-case').forEach(uc => {
            uc.addEventListener('click', function() {
                const name = this.textContent.trim();
                showUseCaseDetails(name);
            });
        });
        
        function showUseCaseDetails(useCaseName) {
            const details = {
                'ƒêƒÉng k√Ω/\nƒêƒÉng nh·∫≠p': {
                    actor: 'Kh√°ch h√†ng',
                    description: 'Kh√°ch h√†ng t·∫°o t√†i kho·∫£n m·ªõi ho·∫∑c ƒëƒÉng nh·∫≠p v√†o h·ªá th·ªëng',
                    precondition: 'H·ªá th·ªëng ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng',
                    postcondition: 'Kh√°ch h√†ng ƒë∆∞·ª£c x√°c th·ª±c v√† c√≥ quy·ªÅn truy c·∫≠p'
                },
                'Qu·∫£n l√Ω\ns·∫£n ph·∫©m': {
                    actor: 'Admin',
                    description: 'Admin th√™m, s·ª≠a, x√≥a s·∫£n ph·∫©m v√† qu·∫£n l√Ω th√¥ng tin s·∫£n ph·∫©m',
                    precondition: 'Admin ƒë√£ ƒëƒÉng nh·∫≠p v·ªõi quy·ªÅn qu·∫£n l√Ω',
                    postcondition: 'D·ªØ li·ªáu s·∫£n ph·∫©m ƒë∆∞·ª£c c·∫≠p nh·∫≠t trong h·ªá th·ªëng'
                }
                // Add more details as needed
            };
            
            const detail = details[useCaseName];
            if (detail) {
                alert(`üìã Chi ti·∫øt Use Case: ${useCaseName}\n\n` +
                      `üë§ Actor: ${detail.actor}\n` +
                      `üìù M√¥ t·∫£: ${detail.description}\n` +
                      `‚úÖ ƒêi·ªÅu ki·ªán tr∆∞·ªõc: ${detail.precondition}\n` +
                      `üéØ ƒêi·ªÅu ki·ªán sau: ${detail.postcondition}`);
            }
        }
        
        // Print functionality
        window.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                window.print();
            }
        });
        
        // Add hover effects
        document.querySelectorAll('.use-case').forEach(uc => {
            uc.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.08)';
                this.style.zIndex = '10';
                this.style.boxShadow = '0 8px 25px rgba(0,0,0,0.25)';
            });
            
            uc.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
                this.style.zIndex = '1';
                this.style.boxShadow = '0 3px 6px rgba(0,0,0,0.1)';
            });
        });
        
        // Add context menu for additional options
        document.addEventListener('contextmenu', function(e) {
            if (e.target.classList.contains('use-case')) {
                e.preventDefault();
                showContextMenu(e, e.target);
            }
        });
        
        function showContextMenu(event, element) {
            const contextMenu = document.createElement('div');
            contextMenu.style.cssText = `
                position: fixed;
                top: ${event.clientY}px;
                left: ${event.clientX}px;
                background: white;
                border: 1px solid #ccc;
                border-radius: 5px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                z-index: 1000;
                padding: 5px 0;
            `;
            
            const menuItems = [
                { text: 'üìã Xem chi ti·∫øt', action: () => showUseCaseDetails(element.textContent.trim()) },
                { text: 'üìä Xem lu·ªìng x·ª≠ l√Ω', action: () => showProcessFlow(element.textContent.trim()) },
                { text: 'üîó Xem li√™n k·∫øt', action: () => showRelationships(element.textContent.trim()) }
            ];
            
            menuItems.forEach(item => {
                const menuItem = document.createElement('div');
                menuItem.textContent = item.text;
                menuItem.style.cssText = `
                    padding: 8px 15px;
                    cursor: pointer;
                    font-size: 12px;
                `;
                menuItem.addEventListener('click', () => {
                    item.action();
                    document.body.removeChild(contextMenu);
                });
                menuItem.addEventListener('mouseenter', () => {
                    menuItem.style.background = '#f0f0f0';
                });
                menuItem.addEventListener('mouseleave', () => {
                    menuItem.style.background = 'white';
                });
                contextMenu.appendChild(menuItem);
            });
            
            document.body.appendChild(contextMenu);
            
            // Remove context menu when clicking elsewhere
            setTimeout(() => {
                document.addEventListener('click', function removeMenu() {
                    if (document.body.contains(contextMenu)) {
                        document.body.removeChild(contextMenu);
                    }
                    document.removeEventListener('click', removeMenu);
                });
            }, 100);
        }
        
        function showProcessFlow(useCaseName) {
            const flows = {
                'ƒêƒÉng k√Ω/\nƒêƒÉng nh·∫≠p': [
                    '1. Kh√°ch h√†ng truy c·∫≠p trang ƒëƒÉng nh·∫≠p',
                    '2. Nh·∫≠p th√¥ng tin ƒëƒÉng nh·∫≠p',
                    '3. H·ªá th·ªëng x√°c th·ª±c th√¥ng tin',
                    '4. T·∫°o session v√† chuy·ªÉn h∆∞·ªõng'
                ],
                'ƒê·∫∑t h√†ng': [
                    '1. Kh√°ch h√†ng ch·ªçn s·∫£n ph·∫©m',
                    '2. Th√™m v√†o gi·ªè h√†ng',
                    '3. X√°c nh·∫≠n ƒë∆°n h√†ng',
                    '4. Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n',
                    '5. T·∫°o ƒë∆°n h√†ng trong h·ªá th·ªëng'
                ],
                'Qu·∫£n l√Ω\ns·∫£n ph·∫©m': [
                    '1. Admin ƒëƒÉng nh·∫≠p h·ªá th·ªëng',
                    '2. Truy c·∫≠p module qu·∫£n l√Ω s·∫£n ph·∫©m',
                    '3. Th·ª±c hi·ªán thao t√°c CRUD',
                    '4. C·∫≠p nh·∫≠t th√¥ng tin v√†o database',
                    '5. Ghi log ho·∫°t ƒë·ªông'
                ]
            };
            
            const flow = flows[useCaseName] || ['Ch∆∞a c√≥ th√¥ng tin lu·ªìng x·ª≠ l√Ω'];
            alert('üîÑ Lu·ªìng x·ª≠ l√Ω: ' + useCaseName + '\n\n' + flow.join('\n'));
        }
        
        function showRelationships(useCaseName) {
            const relationships = {
                'ƒê·∫∑t h√†ng': {
                    includes: ['ƒêƒÉng k√Ω/ƒêƒÉng nh·∫≠p', 'Qu·∫£n l√Ω gi·ªè h√†ng'],
                    extends: ['Thanh to√°n'],
                    actors: ['Kh√°ch h√†ng']
                },
                'Thanh to√°n': {
                    includes: ['X·ª≠ l√Ω giao d·ªãch VNPay'],
                    extends: [],
                    actors: ['Kh√°ch h√†ng', 'VNPay']
                }
            };
            
            const rel = relationships[useCaseName];
            if (rel) {
                let info = `üîó M·ªëi quan h·ªá: ${useCaseName}\n\n`;
                info += `üë• Actors: ${rel.actors.join(', ')}\n`;
                if (rel.includes.length > 0) {
                    info += `üì• Include: ${rel.includes.join(', ')}\n`;
                }
                if (rel.extends.length > 0) {
                    info += `üì§ Extend: ${rel.extends.join(', ')}\n`;
                }
                alert(info);
            } else {
                alert('Ch∆∞a c√≥ th√¥ng tin v·ªÅ m·ªëi quan h·ªá');
            }
        }
        
        // Export functionality
        function exportToPNG() {
            const diagram = document.getElementById('diagram');
            
            // Create a larger canvas for high quality
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const scale = 3; // High resolution
            
            canvas.width = diagram.offsetWidth * scale;
            canvas.height = diagram.offsetHeight * scale;
            ctx.scale(scale, scale);
            
            // Set white background
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, diagram.offsetWidth, diagram.offsetHeight);
            
            // This is a simplified version - in real implementation, you'd use html2canvas
            alert('üì∏ ƒê·ªÉ xu·∫•t ·∫£nh ch·∫•t l∆∞·ª£ng cao:\n\n' +
                  '1. Chu·ªôt ph·∫£i v√†o s∆° ƒë·ªì\n' +
                  '2. Ch·ªçn "Inspect Element"\n' +
                  '3. T√¨m div c√≥ id="diagram"\n' +
                  '4. Chu·ªôt ph·∫£i ‚Üí "Capture node screenshot"\n\n' +
                  'Ho·∫∑c s·ª≠ d·ª•ng Ctrl+P ƒë·ªÉ in th√†nh PDF');
        }
        
        // Add export button
        const exportBtn = document.createElement('button');
        exportBtn.textContent = 'üì∏ Xu·∫•t PNG';
        exportBtn.className = 'download-btn';
        exportBtn.style.right = '160px';
        exportBtn.addEventListener('click', exportToPNG);
        document.querySelector('.container').appendChild(exportBtn);
        
        // Add fullscreen toggle
        const fullscreenBtn = document.createElement('button');
        fullscreenBtn.textContent = 'üîç To√†n m√†n h√¨nh';
        fullscreenBtn.className = 'download-btn';
        fullscreenBtn.style.right = '320px';
        fullscreenBtn.addEventListener('click', toggleFullscreen);
        document.querySelector('.container').appendChild(fullscreenBtn);
        
        function toggleFullscreen() {
            const diagram = document.getElementById('diagram');
            if (!document.fullscreenElement) {
                diagram.requestFullscreen().catch(err => {
                    alert('Kh√¥ng th·ªÉ chuy·ªÉn sang ch·∫ø ƒë·ªô to√†n m√†n h√¨nh');
                });
            } else {
                document.exitFullscreen();
            }
        }
        
        // Add zoom functionality
        let zoomLevel = 1;
        const diagram = document.getElementById('diagram');
        
        diagram.addEventListener('wheel', function(e) {
            if (e.ctrlKey) {
                e.preventDefault();
                const delta = e.deltaY > 0 ? -0.1 : 0.1;
                zoomLevel = Math.max(0.5, Math.min(2, zoomLevel + delta));
                this.style.transform = `scale(${zoomLevel})`;
                this.style.transformOrigin = 'center center';
            }
        });
        
        // Add reset zoom button
        const resetZoomBtn = document.createElement('button');
        resetZoomBtn.textContent = 'üîÑ Reset Zoom';
        resetZoomBtn.className = 'download-btn';
        resetZoomBtn.style.right = '500px';
        resetZoomBtn.addEventListener('click', function() {
            zoomLevel = 1;
            diagram.style.transform = 'scale(1)';
        });
        document.querySelector('.container').appendChild(resetZoomBtn);
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey) {
                switch(e.key) {
                    case 'p':
                        e.preventDefault();
                        window.print();
                        break;
                    case 's':
                        e.preventDefault();
                        exportToPNG();
                        break;
                    case '0':
                        e.preventDefault();
                        zoomLevel = 1;
                        diagram.style.transform = 'scale(1)';
                        break;
                }
            }
            
            if (e.key === 'F11') {
                e.preventDefault();
                toggleFullscreen();
            }
        });
        
        // Add help tooltip
        const helpBtn = document.createElement('button');
        helpBtn.textContent = '‚ùì Tr·ª£ gi√∫p';
        helpBtn.className = 'download-btn';
        helpBtn.style.right = '650px';
        helpBtn.addEventListener('click', showHelp);
        document.querySelector('.container').appendChild(helpBtn);
        
        function showHelp() {
            alert('üöÄ H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:\n\n' +
                  'üñ±Ô∏è Click v√†o Use Case: Xem chi ti·∫øt\n' +
                  'üñ±Ô∏è Chu·ªôt ph·∫£i: Menu t√πy ch·ªçn\n' +
                  'üñ±Ô∏è Hover: Ph√≥ng to Use Case\n\n' +
                  '‚å®Ô∏è Ph√≠m t·∫Øt:\n' +
                  'Ctrl + P: In s∆° ƒë·ªì\n' +
                  'Ctrl + S: Xu·∫•t ·∫£nh\n' +
                  'Ctrl + 0: Reset zoom\n' +
                  'Ctrl + Scroll: Zoom in/out\n' +
                  'F11: To√†n m√†n h√¨nh\n\n' +
                  'üé® M√†u s·∫Øc:\n' +
                  'üî¥ ƒê·ªè: Ch·ª©c nƒÉng Kh√°ch h√†ng\n' +
                  'üü£ T√≠m: Ch·ª©c nƒÉng Admin/Staff\n' +
                  'üü† Cam: Ch·ª©c nƒÉng Shipper\n' +
                  '‚ö´ X√°m: Ch·ª©c nƒÉng H·ªá th·ªëng');
        }
        
        console.log('üéâ S∆° ƒë·ªì Use Case TKT Shop ƒë√£ t·∫£i xong!');
        console.log('üí° S·ª≠ d·ª•ng Ctrl+Shift+I ƒë·ªÉ m·ªü Developer Tools v√† ch·ª•p ·∫£nh ch·∫•t l∆∞·ª£ng cao');
        
    </script>
</body>
</html>